# ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

## ğŸ“‹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
application_server/
â”œâ”€â”€ app.js                      # Express ì•± ìƒì„± ë° ì´ˆê¸°í™” (ë©”ì¸ ë¡œì§)
â”œâ”€â”€ server.js                   # HTTP ì„œë²„ ì‹œì‘ (ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸)
â”œâ”€â”€ package.json                # ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .env                        # í™˜ê²½ ë³€ìˆ˜ (Git ì œì™¸)
â”œâ”€â”€ .env.example                # í™˜ê²½ ë³€ìˆ˜ ìƒ˜í”Œ
â”œâ”€â”€ ARCHITECTURE.md             # ì´ íŒŒì¼ (ì•„í‚¤í…ì²˜ ì„¤ëª…)
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ configs/
    â”‚   â””â”€â”€ index.js            # í™˜ê²½ ì„¤ì • ë° ê²€ì¦
    â”‚
    â”œâ”€â”€ loaders/
    â”‚   â”œâ”€â”€ index.js            # ë¡œë” ì¬ìˆ˜ì¶œ
    â”‚   â”œâ”€â”€ loaders.js          # ë¡œë” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
    â”‚   â”œâ”€â”€ postgresLoader.js   # DB ì—°ê²° ì´ˆê¸°í™”
    â”‚   â””â”€â”€ expressLoader.js    # Express ì„¤ì •
    â”‚
    â”œâ”€â”€ api/                    # API ë¼ìš°íŠ¸ (ì¤€ë¹„ ì¤‘)
    â”‚   â”œâ”€â”€ index.js
    â”‚   â”œâ”€â”€ users/
    â”‚   â”œâ”€â”€ posts/
    â”‚   â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ services/               # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì¤€ë¹„ ì¤‘)
    â”‚   â”œâ”€â”€ userService.js
    â”‚   â”œâ”€â”€ postService.js
    â”‚   â””â”€â”€ ...
    â”‚
    â”œâ”€â”€ daos/                   # ë°ì´í„° ì ‘ê·¼ ê°ì²´ (ì¤€ë¹„ ì¤‘)
    â”‚   â”œâ”€â”€ userDAO.js
    â”‚   â”œâ”€â”€ postDAO.js
    â”‚   â””â”€â”€ ...
    â”‚
    â””â”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° (ì¤€ë¹„ ì¤‘)
        â”œâ”€â”€ logger.js
        â”œâ”€â”€ validators.js
        â””â”€â”€ ...
```

## ğŸ”„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í„°ë¯¸ë„: node server.js                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    server.js            â”‚
         â”‚ (HTTP ì„œë²„ ì‹œì‘ì )      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    app.js               â”‚
         â”‚ (Express ì•± ìƒì„±)       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  src/configs            â”‚
         â”‚ (ì„¤ì •ê°’ ë¡œë“œ ë° ê²€ì¦)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  src/loaders            â”‚
         â”‚ (ë¡œë” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚
        â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ postgresLoader   â”‚      â”‚ expressLoader    â”‚
â”‚ - DB ì—°ê²°        â”‚      â”‚ - ë¯¸ë“¤ì›¨ì–´ ì„¤ì •  â”‚
â”‚ - í’€ ìƒì„±        â”‚      â”‚ - ë¼ìš°íŠ¸ ì„¤ì •    â”‚
â”‚ - ì—°ê²° ê²€ì¦      â”‚      â”‚ - ì—ëŸ¬ í•¸ë“¤ë§    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   ì™„ì „íˆ ì´ˆê¸°í™”ëœ ì•±    â”‚
         â”‚  (server.jsë¡œ ë°˜í™˜)     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  ì„œë²„ í¬íŠ¸ì—ì„œ ë¦¬ìŠ¤ë‹   â”‚
         â”‚  ğŸš€ ì„œë²„ ì‹œì‘ ì™„ë£Œ      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ê° íŒŒì¼ì˜ ì—­í• 

### 1. **server.js** (ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸)
- Node.js í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ì²« ì§„ì…ì 
- HTTP ì„œë²„ ìƒì„±
- í¬íŠ¸ì—ì„œ ë¦¬ìŠ¤ë‹

**íë¦„:**
```javascript
node server.js
  â†’ createApp() í˜¸ì¶œ
  â†’ http.createServer(app) ìƒì„±
  â†’ server.listen(port)
```

### 2. **app.js** (Express ì•± ìƒì„±)
- Express ì•± ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- ëª¨ë“  ë¡œë” ì‹¤í–‰
- ì™„ì „íˆ ì´ˆê¸°í™”ëœ ì•± ë°˜í™˜

**íë¦„:**
```javascript
async function createApp() {
  const app = express();
  await loaders({ expressApp: app, config });
  return app;
}
```

### 3. **src/configs/index.js** (ì„¤ì • ê´€ë¦¬)
- í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ (.env)
- í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
- ì „ì—­ ì„¤ì • ê°ì²´ ì œê³µ

**í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜:**
```
DB_HOST=localhost
DB_USER=admin
DB_PASSWORD=password
DB_NAME=myapp
JWT_SECRET_KEY=your-secret-key
GOOGLE_CLIENT_ID=your-client-id
```

### 4. **src/loaders/loaders.js** (ë¡œë” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)
- ì´ˆê¸°í™” ìˆœì„œ ê´€ë¦¬
- 1ï¸âƒ£ postgresLoader â†’ DB ì—°ê²°
- 2ï¸âƒ£ expressLoader â†’ Express ì„¤ì •

âš ï¸ **ìˆœì„œê°€ ì¤‘ìš”:** DBë¥¼ ë¨¼ì € ì´ˆê¸°í™”í•´ì•¼ ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ DB ì ‘ê·¼ ê°€ëŠ¥

### 5. **src/loaders/postgresLoader.js** (DB ì´ˆê¸°í™”)
- PostgreSQL ì—°ê²° í’€ ìƒì„±
- ì—°ê²° í…ŒìŠ¤íŠ¸
- ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ í’€ ê´€ë¦¬

### 6. **src/loaders/expressLoader.js** (Express ì„¤ì •)
- CORS ì„¤ì •
- Body íŒŒì‹± ë¯¸ë“¤ì›¨ì–´
- í—¬ìŠ¤ì²´í¬ ë¼ìš°íŠ¸ (/status)
- 404, ì—ëŸ¬ í•¸ë“¤ë§

## ğŸ“Š ë°ì´í„° íë¦„

```
í´ë¼ì´ì–¸íŠ¸ ìš”ì²­
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Express ë¯¸ë“¤ì›¨ì–´            â”‚
â”‚ (CORS, JSON íŒŒì‹± ë“±)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API ë¼ìš°íŠ¸                   â”‚
â”‚ (src/api/)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë¹„ìŠ¤ ë¡œì§                  â”‚
â”‚ (src/services/)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë°ì´í„° ì ‘ê·¼                  â”‚
â”‚ (src/daos/)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
       ì‘ë‹µ ë°˜í™˜
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
# .env íŒŒì¼ ìƒì„± (ë˜ëŠ” .env.example ë³µì‚¬)
cp .env.example .env

# í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
# - DB_HOST, DB_USER, DB_PASSWORD, DB_NAME
# - JWT_SECRET_KEY
# - GOOGLE_CLIENT_ID
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 3. ì„œë²„ ì‹œì‘
```bash
# ì¼ë°˜ ì‹¤í–‰
node server.js

# ê°œë°œ ëª¨ë“œ (ìë™ ì¬ì‹œì‘)
npm run dev  # (package.jsonì— ì„¤ì • í•„ìš”)
```

### 4. ìƒíƒœ í™•ì¸
```bash
curl http://localhost:3000/status
# ì‘ë‹µ:
# {
#   "status": "ok",
#   "timestamp": "2026-01-11T...",
#   "env": "development"
# }
```

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### API ë¼ìš°íŠ¸ ì¶”ê°€
```javascript
// src/api/users/index.js
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
  res.json({ users: [] });
});

module.exports = router;
```

### Expressì—ì„œ ë¼ìš°íŠ¸ ë§ˆìš´íŠ¸
```javascript
// src/loaders/expressLoader.jsì—ì„œ
app.use('/api/users', require('../api/users'));
```

### ì„œë¹„ìŠ¤ ê³„ì¸µ ì¶”ê°€
```javascript
// src/services/userService.js
class UserService {
  async getAllUsers() {
    // DB ì¿¼ë¦¬
  }
}

module.exports = new UserService();
```

### DAO ê³„ì¸µ ì¶”ê°€
```javascript
// src/daos/userDAO.js
class UserDAO {
  async find() {
    // SELECT * FROM users
  }
}

module.exports = new UserDAO();
```

## ğŸ” ë””ë²„ê¹… íŒ

### 1. ë¡œê·¸ í™•ì¸
- ì„œë²„ ì‹œì‘ ì‹œ ì¶œë ¥ë˜ëŠ” ë¡œê·¸ ë©”ì‹œì§€ í™•ì¸
- ê° ë¡œë”ê°€ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸

### 2. í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
```bash
# PowerShellì—ì„œ í™˜ê²½ ë³€ìˆ˜ í™•ì¸
echo $env:DB_HOST
```

### 3. DB ì—°ê²° í…ŒìŠ¤íŠ¸
```javascript
// src/loaders/postgresLoader.jsì—ì„œ
// ì—°ê²° ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
```

### 4. Express ë¯¸ë“¤ì›¨ì–´ ìˆœì„œ
- ë¯¸ë“¤ì›¨ì–´ ìˆœì„œê°€ ì¤‘ìš”í•¨
- API ë¼ìš°íŠ¸ëŠ” 404 í•¸ë“¤ëŸ¬ ì „ì— ë§ˆìš´íŠ¸í•´ì•¼ í•¨

## ğŸ“š ì°¸ê³ ìë£Œ

- [Express ê³µì‹ ë¬¸ì„œ](https://expressjs.com)
- [pg (PostgreSQL ë“œë¼ì´ë²„) ë¬¸ì„œ](https://node-postgres.com)
- [Node.js ëª¨ë²” ì‚¬ë¡€](https://nodejs.org/en/docs/guides/nodejs-web-app-architecture/)
